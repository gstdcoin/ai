# üí∞ –ù–ê–°–¢–†–û–ô–ö–ê –ö–û–ú–ò–°–°–ò–ô –ò –ü–£–õ–ê GSTD/XAUt

## ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 1. –ö–æ–º–∏—Å—Å–∏—è 5% –Ω–∞ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫
- ‚úÖ Escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 5% –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ `AdminWallet`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç `escrow.tact` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `adminWallet` –≤–º–µ—Å—Ç–æ `treasury`
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `ADMIN_WALLET` - –∞–¥—Ä–µ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–∏—Å—Å–∏–∏

### 2. –ö–æ—à–µ–ª–µ–∫ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∏—Å—Å–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `scripts/generate_commission_wallet.sh`
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∏—Å—Å–∏–π (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
- ‚úÖ –ê–¥–º–∏–Ω –ø–æ–ø–æ–ª–Ω—è–µ—Ç —ç—Ç–æ—Ç –∫–æ—à–µ–ª–µ–∫ TON –¥–ª—è gas fees

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—É–ª–∞ GSTD/XAUt
- ‚úÖ –°–æ–∑–¥–∞–Ω `PoolMonitorService` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—É–ª–∞
- ‚úÖ Endpoint: `GET /api/v1/pool/status`
- ‚úÖ –ê–¥—Ä–µ—Å –ø—É–ª–∞: `EQA--JXG8VSyBJmLMqb2J2t4Pya0TS9SXHh7vHh8Iez25sLp`
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—É–ª–∞ –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ –î–∏–∑–∞–π–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —á–∞—Å—Ç–∏ –∫–∞–±–∏–Ω–µ—Ç–∞
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ GSTD –∫–∞–∫ —É—Ç–∏–ª–∏—Ç–∏ —Ç–æ–∫–µ–Ω–µ
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (MiCA, SEC)
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ –ø—É–ª

## üìã –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### .env —Ñ–∞–π–ª

```bash
# –ê–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫ (–ø–æ–ª—É—á–∞–µ—Ç 5% –∫–æ–º–∏—Å—Å–∏–∏)
ADMIN_WALLET=<–≤–∞—à_–∞–¥–º–∏–Ω_–∫–æ—à–µ–ª–µ–∫>

# –ö–æ—à–µ–ª–µ–∫ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∏—Å—Å–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
COMMISSION_WALLET_ADDRESS=<–∞–¥—Ä–µ—Å_–∫–æ—à–µ–ª—å–∫–∞_–∫–æ–º–∏—Å—Å–∏–π>
COMMISSION_WALLET_PRIVATE_KEY=<–ø—Ä–∏–≤–∞—Ç–Ω—ã–π_–∫–ª—é—á>  # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã

# –ü—É–ª GSTD/XAUt –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
POOL_ADDRESS=EQA--JXG8VSyBJmLMqb2J2t4Pya0TS9SXHh7vHh8Iez25sLp

# Escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç (–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AdminWallet)
TON_CONTRACT_ADDRESS=<–∞–¥—Ä–µ—Å_escrow_–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞>
```

## üîß –ù–ê–°–¢–†–û–ô–ö–ê

### 1. –°–æ–∑–¥–∞—Ç—å –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –∫–æ–º–∏—Å—Å–∏–π (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)

```bash
cd /home/ubuntu
./scripts/generate_commission_wallet.sh
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:
- `wallets/commission_wallet.txt` - –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
- `wallets/commission_private_key.txt` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–ø—Ä–∞–≤–∞ 600)

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤ .env

```bash
COMMISSION_WALLET_ADDRESS=<–∞–¥—Ä–µ—Å_–∏–∑_—Ñ–∞–π–ª–∞>
COMMISSION_WALLET_PRIVATE_KEY=<–∫–ª—é—á_–∏–∑_—Ñ–∞–π–ª–∞>
```

### 3. –ü–æ–ø–æ–ª–Ω–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ TON

–û—Ç–ø—Ä–∞–≤—å—Ç–µ 5-10 TON –Ω–∞ –∞–¥—Ä–µ—Å `COMMISSION_WALLET_ADDRESS` –¥–ª—è –æ–ø–ª–∞—Ç—ã gas fees –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∫–æ–º–∏—Å—Å–∏–π.

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å AdminWallet

```bash
ADMIN_WALLET=<–≤–∞—à_–∞–¥–º–∏–Ω_–∫–æ—à–µ–ª–µ–∫>
```

–≠—Ç–æ—Ç –∫–æ—à–µ–ª–µ–∫ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å 5% –∫–æ–º–∏—Å—Å–∏–∏ –æ—Ç –≤—Å–µ—Ö –∑–∞–¥–∞—á.

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–£–õ–ê

### API Endpoint

```bash
GET /api/v1/pool/status
```

**Response**:
```json
{
  "pool_address": "EQA--JXG8VSyBJmLMqb2J2t4Pya0TS9SXHh7vHh8Iez25sLp",
  "gstd_balance": 0,
  "xaut_balance": 0,
  "total_value_usd": 0,
  "last_updated": "2024-01-01T00:00:00Z",
  "is_healthy": true,
  "reserve_ratio": 0
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Frontend

–ü—É–ª –º–æ–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ GSTD:

```typescript
const response = await fetch('/api/v1/pool/status');
const poolStatus = await response.json();

// –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è
if (poolStatus.is_healthy && poolStatus.gstd_balance > 0) {
  // –ü—É–ª –∞–∫—Ç–∏–≤–µ–Ω –∏ –∏–º–µ–µ—Ç —Ä–µ–∑–µ—Ä–≤—ã
}
```

## üîÑ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –ö–û–ú–ò–°–°–ò–Ø

### Pull-Model (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

1. **Worker –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
2. **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç** ‚Üí –∑–∞–¥–∞—á–∞ `validated`
3. **Worker –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç payout intent** ‚Üí `POST /api/v1/payments/payout-intent`
4. **Worker –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** ‚Üí —á–µ—Ä–µ–∑ TonConnect
5. **Escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 95% –Ω–∞–≥—Ä–∞–¥—ã worker'—É
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 5% –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ `AdminWallet`
   - Worker –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç gas fees —Å–∞–º

### –í–∞–∂–Ω–æ

- ‚úÖ –ö–æ–º–∏—Å—Å–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º
- ‚úÖ –ê–¥–º–∏–Ω –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å - –∫–æ–º–∏—Å—Å–∏—è –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ `ADMIN_WALLET`
- ‚úÖ –ê–¥–º–∏–Ω —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ–ø–æ–ª–Ω—è–µ—Ç –ø—É–ª GSTD/XAUt
- ‚úÖ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—É–ª–∞ –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è

## üéØ ESCROW –ö–û–ù–¢–†–ê–ö–¢

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å `AdminWallet`:

```tact
init(owner: Address, adminWalletAddress: Address) {
    Ownable.init(owner);
    self.adminWallet = adminWalletAddress;
}
```

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —É–∫–∞–∂–∏—Ç–µ:
- `owner`: –í–∞—à –∞–¥—Ä–µ—Å (–≤–ª–∞–¥–µ–ª–µ—Ü –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)
- `adminWalletAddress`: `ADMIN_WALLET` –∏–∑ .env

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**:
   ```bash
   echo $ADMIN_WALLET
   echo $POOL_ADDRESS
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoint –ø—É–ª–∞**:
   ```bash
   curl http://localhost:8080/api/v1/pool/status
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AdminWallet`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–º–∏—Å—Å–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å

## üìù –°–¢–ê–¢–£–°

‚úÖ **–ì–û–¢–û–í–û**:
- –ö–æ–º–∏—Å—Å–∏—è 5% –∏–¥–µ—Ç –Ω–∞ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫
- –°–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ—à–µ–ª—å–∫–∞ –∫–æ–º–∏—Å—Å–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—É–ª–∞ GSTD/XAUt
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ GSTD –∫–∞–∫ —É—Ç–∏–ª–∏—Ç–∏ —Ç–æ–∫–µ–Ω–µ

‚úÖ **–ù–ï –ù–£–ñ–ù–û**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –∫–æ–º–∏—Å—Å–∏–∏ (–¥–µ–ª–∞–µ—Ç escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç)
- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—É–ª–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π (–∞–¥–º–∏–Ω –¥–µ–ª–∞–µ—Ç —Å–∞–º)

---

**–í—Å—ë –≥–æ—Ç–æ–≤–æ!** –ê–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø—É–ª –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è, –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞! üéâ

