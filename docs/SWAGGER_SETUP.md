# Swagger UI Documentation Setup

**–î–∞—Ç–∞:** 2026-01-13  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω swaggo/gin-swagger

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `go.mod`:**
- `github.com/swaggo/gin-swagger v1.6.0`
- `github.com/swaggo/swag v1.16.2`
- `github.com/swaggo/files v1.0.1` (—É–∂–µ –±—ã–ª)

---

### 2. ‚úÖ –°–æ–∑–¥–∞–Ω –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏

**–§–∞–π–ª:** `backend/docs/swagger.go`

–û—Å–Ω–æ–≤–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏:
- `@title`: GSTD DePIN Platform API
- `@version`: 1.0
- `@description`: –û–ø–∏—Å–∞–Ω–∏–µ API
- `@host`: app.gstdtoken.com
- `@BasePath`: /api/v1
- `@securityDefinitions`: SessionToken (X-Session-Token header)

---

### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∫ –æ—Å–Ω–æ–≤–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º

#### –ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `GET /health` - Health check
- `GET /stats/public` - –ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /pool/status` - –°—Ç–∞—Ç—É—Å –ø—É–ª–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
- `POST /users/login` - –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (—Ç—Ä–µ–±—É—é—Ç X-Session-Token):
- `POST /tasks` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `GET /tasks` - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- `GET /tasks/{id}` - –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏
- `POST /nodes/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–¥—ã
- `GET /nodes/my` - –ú–æ–∏ –Ω–æ–¥—ã
- `GET /stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /wallet/gstd-balance` - –ë–∞–ª–∞–Ω—Å GSTD
- `POST /payments/payout-intent` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏—è –≤—ã–ø–ª–∞—Ç—ã

---

### 4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `backend/scripts/generate-swagger.sh` - –°–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `backend/Makefile` - Make –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

**–û–±–Ω–æ–≤–ª–µ–Ω:** `backend/internal/api/docs_handler.go`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `gin-swagger` –≤–º–µ—Å—Ç–æ `http-swagger`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç
cd backend
./scripts/generate-swagger.sh

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Make
cd backend
make swagger

# –í–∞—Ä–∏–∞–Ω—Ç 3: –í—Ä—É—á–Ω—É—é
cd backend
swag init -g main.go -o ./docs --parseDependency --parseInternal
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ swag CLI

```bash
# –ï—Å–ª–∏ swag –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
go install github.com/swaggo/swag/cmd/swag@latest

# –ò–ª–∏ —á–µ—Ä–µ–∑ Make
make swagger-install
```

### –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞ backend:

- **–õ–æ–∫–∞–ª—å–Ω–æ:** http://localhost:8080/api/v1/swagger/index.html
- **Production:** https://app.gstdtoken.com/api/v1/swagger/index.html

---

## üìù –§–æ—Ä–º–∞—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π

### –ü—Ä–∏–º–µ—Ä –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:

```go
// @Summary –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
// @Description –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
// @Tags –ö–∞—Ç–µ–≥–æ—Ä–∏—è (Tasks, Nodes, Authentication, etc.)
// @Accept json
// @Produce json
// @Security SessionToken
// @Param id path string true "Task ID"
// @Param request body object true "Request body"
// @Success 200 {object} models.Task "Success response"
// @Failure 400 {object} map[string]string "Bad request"
// @Failure 401 {object} map[string]string "Unauthorized"
// @Router /tasks/{id} [get]
func getTask(service *services.TaskService) gin.HandlerFunc {
    // ...
}
```

### –¢–µ–≥–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:

- `Public` - –ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `Authentication` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `Tasks` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
- `Nodes` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–¥–∞–º–∏
- `Devices` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- `Statistics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `Wallet` - –ö–æ—à–µ–ª–µ–∫
- `Payments` - –ü–ª–∞—Ç–µ–∂–∏
- `Admin` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend/
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ swagger.go          # –û—Å–Ω–æ–≤–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ docs.go             # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å)
‚îÇ   ‚îú‚îÄ‚îÄ swagger.json          # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å)
‚îÇ   ‚îî‚îÄ‚îÄ swagger.yaml         # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π YAML (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å)
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ generate-swagger.sh  # –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ Makefile                 # Make –∫–æ–º–∞–Ω–¥—ã
‚îî‚îÄ‚îÄ internal/api/
    ‚îú‚îÄ‚îÄ docs_handler.go      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Swagger UI
    ‚îú‚îÄ‚îÄ routes.go            # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏
    ‚îî‚îÄ‚îÄ ...
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:

```bash
cd backend
make swagger
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend:

```bash
docker-compose up backend
# –∏–ª–∏
go run main.go
```

### 3. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:8080/api/v1/swagger/index.html
```

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

- Swagger UI –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- –î–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "Authorize" –∏ –≤–≤–µ–¥–∏—Ç–µ session_token

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

1. –î–æ–±–∞–≤—å—Ç–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Ñ—É–Ω–∫—Ü–∏–µ–π-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `make swagger` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–æ–¥–µ–ª–∏:

```go
// @Success 200 {object} models.Task
// –≥–¥–µ models.Task - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏:
type Task struct {
    TaskID string `json:"task_id" example:"abc-123"`
    Status string `json:"status" example:"pending"`
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

```go
// @Param request body object true "Request" example({"wallet_address":"EQ...","signature":"..."})
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ª—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç:

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é** –ø–æ –∞–¥—Ä–µ—Å—É `/api/v1/swagger`
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å API** –≤ —Å–≤–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. **–ü–æ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤**

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∞—Å—å –∏–∑ "–∑–∞–∫—Ä—ã—Ç–æ–≥–æ —Å–∞–π—Ç–∞" –≤ "–æ—Ç–∫—Ä—ã—Ç—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"! üöÄ

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2026-01-13  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
