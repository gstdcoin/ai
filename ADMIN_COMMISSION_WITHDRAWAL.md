# üí∞ –í–´–í–û–î –ö–û–ú–ò–°–°–ò–ò –ê–î–ú–ò–ù–û–ú

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –∑–∞–±–∏—Ä–∞—Ç—å –∫–æ–º–∏—Å—Å–∏—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫. –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –∞–¥–º–∏–Ω –∫–æ—à–µ–ª—å–∫–∞.

## üîê –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø

–í—Å–µ –∞–¥–º–∏–Ω endpoints —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫:

**Header**:
```
X-Wallet-Address: <ADMIN_WALLET>
```

**–ò–ª–∏ Query –ø–∞—Ä–∞–º–µ—Ç—Ä**:
```
?wallet_address=<ADMIN_WALLET>
```

## üìã API ENDPOINTS

### 1. –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ–º–∏—Å—Å–∏–∏

```bash
GET /api/v1/admin/commission/balance
Headers:
  X-Wallet-Address: <ADMIN_WALLET>
```

**Response**:
```json
{
  "total_commission": 1.5,
  "pending_tasks": 10,
  "claimed_tasks": 5
}
```

### 2. –ü–æ–ª—É—á–∏—Ç—å intent –¥–ª—è –≤—ã–≤–æ–¥–∞ –∫–æ–º–∏—Å—Å–∏–∏

```bash
GET /api/v1/admin/commission/withdraw-intent
Headers:
  X-Wallet-Address: <ADMIN_WALLET>
```

**Response**:
```json
{
  "admin_wallet": "EQ...",
  "total_commission": 1.5,
  "amount_nano": 1500000000,
  "pending_tasks": 10,
  "claimed_tasks": 5,
  "message": "Commission is automatically sent to admin wallet by escrow contract. Check your wallet balance."
}
```

## üîÑ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢

### Pull-Model (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

1. **Worker –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
2. **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç** ‚Üí –∑–∞–¥–∞—á–∞ `validated`
3. **Worker –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç payout intent** ‚Üí `POST /api/v1/payments/payout-intent`
4. **Worker –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** ‚Üí —á–µ—Ä–µ–∑ TonConnect
5. **Escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 95% –Ω–∞–≥—Ä–∞–¥—ã worker'—É
   - **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 5% –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ `ADMIN_WALLET`**
   - Worker –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç gas fees —Å–∞–º

### –í–∞–∂–Ω–æ

- ‚úÖ –ö–æ–º–∏—Å—Å–∏—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è escrow –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –Ω–∞ `ADMIN_WALLET`
- ‚úÖ –ê–¥–º–∏–Ω **–Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å** - –∫–æ–º–∏—Å—Å–∏—è –ø—Ä–∏—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ Endpoints –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–º–∏—Å—Å–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É
- ‚úÖ –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—É—é –∫–æ–º–∏—Å—Å–∏—é —á–µ—Ä–µ–∑ API

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

- ‚úÖ –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ endpoints
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–∞ (case-insensitive, dash-insensitive)
- ‚úÖ –ö–æ–º–∏—Å—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

Endpoints –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:
- `total_commission`: –û–±—â–∞—è –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è (–≤ TON)
- `pending_tasks`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Å –æ–∂–∏–¥–∞—é—â–µ–π –∫–æ–º–∏—Å—Å–∏–µ–π
- `claimed_tasks`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–µ–π

## ‚úÖ –°–¢–ê–¢–£–°

‚úÖ **–ì–û–¢–û–í–û**:
- Endpoints –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–º–∏—Å—Å–∏–∏
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª—å–∫—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–ö–æ–º–∏—Å—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –∞–¥–º–∏–Ω –∫–æ—à–µ–ª–µ–∫!** üéâ

